package com.whg.hard.maximalrectangle;
// problemId:85

import java.util.*;
/**
 * Solution class
 *
 * problemId 85
 * @author wanghaogang
 * @date 2018/6/16
 */

public class Solution {
    private int max(int a,int b) {
        return a>b?a:b;
    }
    private int min(int a,int b) {
        return a>b?b:a;
    }
    public int maximalRectangle(char[][] matrix) {
        if(matrix==null||matrix.length==0) {
            return 0;
        }
        int m=matrix.length,n=matrix[0].length;
        if(n==0) {
            return 0;
        }
        int[][] up=new int[m][n],left=new int[m][n],right=new int[m][n];
        int ans=0;
        for (int i=0; i<m; ++i) {
            int lo=-1,ro=n;
            for (int j=0; j<n; ++j) {
                if(matrix[i][j]=='0') {
                    up[i][j]=left[i][j]=0;
                    lo=j;
                } else {
                    up[i][j]=i==0?1:up[i-1][j]+1;
                    left[i][j]=i==0?lo+1:max(left[i-1][j],lo+1);
                }
            }
            for (int j=n-1; j>=0; --j) {
                if(matrix[i][j]=='0') {
                    right[i][j]=n;
                    ro=j;
                } else {
                    right[i][j]=i==0?ro-1:min(right[i-1][j],ro-1);
                    ans=max(ans,up[i][j]*(right[i][j]-left[i][j]+1));
                }
            }
        }
        return ans;
    }

    public static void main(String[] args) {
        char[][] buildings={{'1','0','1','0','0'},{'1','0','1','1','1'},{'1','1','1','1','1'},{'1','0','0','1','0'}};
        int ans = new Solution().maximalRectangle(buildings);
        System.out.println(""+ans);
    }
}
